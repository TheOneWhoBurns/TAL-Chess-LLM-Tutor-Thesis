{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Tutor</title>

    <!-- Chess Dependencies -->
    <link rel="stylesheet" href="{% static 'css/chessboard-1.0.0.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

    <!-- Load jQuery first -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Chess.js and Chessboard.js -->
    <script src="{% static 'js/chess.min.js' %}"></script>
    <script src="{% static 'js/chessboard-1.0.0.min.js' %}"></script>
</head>
<body>
<!-- Simple structure first, we'll add React later -->
<div class="container">
    <div id="board-section">
        <div id="board"></div>
        <div class="board-controls">
            <button id="newGameBtn">New Game</button>
            <button id="flipBoardBtn">Flip Board</button>
        </div>
    </div>

    <div class="right-panel">
        <div id="move-history">
            <div class="history-header">
                <h3>Move History</h3>
            </div>
            <div class="history-content"></div>
        </div>

        <div id="chat-container">
            <div id="chat-messages"></div>
            <form id="chat-form" class="chat-form">
                {% csrf_token %}
                <input type="text" id="user-input" placeholder="Type your message...">
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
</div>

<!-- Initialize the board -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize the board
        const board = Chessboard('board', {
            position: 'start',
            draggable: true,
            pieceTheme: '/static/img/chesspieces/wikipedia/{piece}.png'
        });

        // Add button handlers
        document.getElementById('newGameBtn').addEventListener('click', () => {
            board.start();
        });

        document.getElementById('flipBoardBtn').addEventListener('click', () => {
            board.flip();
        });

        // Make board responsive
        window.addEventListener('resize', board.resize);
    });
</script>

<!-- Chat functionality -->
<script src="{% static 'js/chat.js' %}"></script>
</body>
</html>